<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>YÄ±lbaÅŸÄ± Orman Åans Ã‡arkÄ±</title>
<style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: Arial, sans-serif;
      background: radial-gradient(circle at top, #0b3d2e, #041f14);
      color: #fff;
    }
    canvas {
      background: radial-gradient(circle, #145a32, #0b3d2e);
      border-radius: 50%;
    }
    button {
      margin-top: 20px;
      padding: 12px 30px;
      font-size: 18px;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background: linear-gradient(135deg, #d4af37, #ffec8b);
      color: #000;
    }

    @keyframes glow {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
      50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
    }

    @keyframes shake {
      0%, 100% { transform: translate(-50%, -50%) translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translate(-50%, -50%) translateX(-10px); }
      20%, 40%, 60%, 80% { transform: translate(-50%, -50%) translateX(10px); }
    }
</style>
</head>
<body>
<h1>ğŸ„ YÄ±lbaÅŸÄ± Orman Åans Ã‡arkÄ± ğŸ„</h1>
<canvas id="wheel" width="400" height="400"></canvas>
<button id="spinBtn" onclick="spin()">Ã‡EVÄ°R</button>
<p id="result">SonuÃ§: -</p>
<p id="rights">Kalan hak: 3</p>
<a href="/" style="color: #ffec8b; text-decoration: none; font-size: 18px; margin-top: 20px; display: inline-block;">Ana Sayfa'ya Git</a>
<div id="popup" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 50px; color: #ffec8b; text-shadow: 0 0 20px #ffec8b; z-index: 10; animation: glow 1.5s ease-in-out;"></div>
<div id="error-popup" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 50px; color: #ff0000; text-shadow: 0 0 20px #ff0000; z-index: 10; animation: shake 1s ease-in-out;"></div>

  <script>
    const canvas = document.getElementById("wheel");
    const ctx = canvas.getContext("2d");

    const items = [
      "ğŸ 10 Puan",
      "ğŸ„ 20 Puan",
      "â­ %20 Ä°ndirim",
      "â„ï¸ 100 Puan",
      "ğŸ¦Œ %50 Ä°ndirim",
      "ğŸ‘‘ BÃ¼yÃ¼k Ã–dÃ¼l"
    ];

    const colors = ["#1e8449", "#145a32", "#7d6608", "#b03a2e", "#196f3d", "#873600"];
    const sliceAngle = (2 * Math.PI) / items.length;
    let rotation = 0;
    let rights = 3;

    function drawWheel() {
      for (let i = 0; i < items.length; i++) {
        ctx.beginPath();
        ctx.fillStyle = colors[i % colors.length];
        ctx.moveTo(200, 200);
        ctx.arc(200, 200, 200, sliceAngle * i + rotation, sliceAngle * (i + 1) + rotation);
        ctx.fill();

        ctx.save();
        ctx.translate(200, 200);
        ctx.rotate(sliceAngle * i + sliceAngle / 2 + rotation);
        ctx.textAlign = "right";
        ctx.fillStyle = "#000";
        ctx.font = "16px Arial";
        ctx.fillText(items[i], 180, 10);
        ctx.restore();
      }
    }

    function spin() {
      if (rights <= 0) {
        const errorPopup = document.getElementById("error-popup");
        errorPopup.innerText = "HakkÄ±nÄ±z Bitti!";
        errorPopup.style.display = "block";
        setTimeout(() => {
          errorPopup.style.display = "none";
        }, 1000);
        return;
      }
      rights--;
      document.getElementById("rights").innerText = "Kalan hak: " + rights;
      document.getElementById("spinBtn").disabled = true;
      const spinAngle = Math.random() * 3000 + 2000;
      const start = rotation;
      const startTime = performance.now();
      const duration = 3000;

      function animate(time) {
        const progress = Math.min((time - startTime) / duration, 1);
        rotation = start + spinAngle * easeOut(progress);
        ctx.clearRect(0, 0, 400, 400);
        drawWheel();
        if (progress < 1) requestAnimationFrame(animate);
        else finish();
      }
      requestAnimationFrame(animate);
    }

    function finish() {
      document.getElementById("spinBtn").disabled = false;
      const index = Math.floor(items.length - (rotation % (2 * Math.PI)) / sliceAngle) % items.length;
      document.getElementById("result").innerText = "SonuÃ§: " + items[index];
      const popup = document.getElementById("popup");
      popup.innerText = items[index];
      popup.style.display = "block";
      setTimeout(() => {
        popup.style.display = "none";
      }, 1500);
    }

    function easeOut(t) {
      return 1 - Math.pow(1 - t, 3);
    }

    drawWheel();
</script>
</body>
</html>
